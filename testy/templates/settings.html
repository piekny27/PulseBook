{% extends "base.html" %}

{% block styles %}
<link rel="stylesheet" href="/static/styles/settingspage.css">
{% endblock %}

{% block title %}
SettingsTest
{% endblock %}

{% block content %}
<div class="container-md light-style section">
  <h4 class="font-weight-bold py-3 mb-4 text-white">
    Account settings
  </h4>
  <form method="post">
    <div class="card overflow-hidden">
      <div class="row">
        <div class="col-md-3 pt-0">
          <div class="nav flex-column nav-pills me-3" id="v-pills-tab" role="tablist" aria-orientation="vertical">
            <button class="nav-link active" id="v-pills-home-tab" data-bs-toggle="pill" data-bs-target="#v-pills-home"
              type="button" role="tab" aria-controls="v-pills-home" aria-selected="true">Device</button>
            <button class="nav-link" id="v-pills-profile-tab" data-bs-toggle="pill" data-bs-target="#v-pills-profile"
              type="button" role="tab" aria-controls="v-pills-profile" aria-selected="false">Change Password</button>
            <button class="nav-link" id="v-pills-messages-tab" data-bs-toggle="pill" data-bs-target="#v-pills-messages"
              type="button" role="tab" aria-controls="v-pills-messages" aria-selected="false">Delete account</button>
          </div>
        </div>
        <div class="col">
          <div class="tab-content" id="v-pills-tabContent" style="margin:0 auto;">
            <div class="tab-pane fade show active" id="v-pills-home" role="tabpanel" aria-labelledby="v-pills-home-tab">
              <div class="test">
                <div class="settings-card">
                  <div class="progress">
                    <div class="progress-bar"></div>
                  </div>
                  <ul class="center2">
                    <li class="aaa" id="tab1">
                      <div class="circle-border">
                        <div class="circle-fill"></div>
                        <div class="circle-validate"></div>
                        <i class="fa-solid fa-gear"></i>
                        <p>Power & WiFi</p>
                      </div>
                    </li>
                    <li class="aaa" id="tab2">                     
                      <div class="circle-border">
                        <div class="circle-fill"></div>
                        <div class="circle-validate"></div>
                        <i class="fa-solid fa-key"></i>
                        <p>Device key</p>
                      </div>
                    </li>
                    <li class="aaa" id="tab3">
                      <div class="circle-border">
                        <div class="circle-fill"></div>
                        <div class="circle-validate"></div>
                        <i class="fa-solid fa-list-ol"></i>
                        <p>Pin Code</p>
                      </div>
                    </li>
                    <li class="aaa" id="tab4">
                      <div class="circle-border">
                        <div class="circle-fill"></div>
                        <div class="circle-validate"></div>
                        <i class="fa-solid fa-circle-check"></i>
                        <p>Finish</p>
                      </div>
                    </li>
                  </ul>
                  <div class="tab-content">
                    <div id="menu0" class="tab-pane">
                      <p>Connect the device to the power supply</p>
                      <p>5V DC 0.3A charger required</p>
                      <video src="/static/images/settings_power_anim.mp4" muted loop autoplay></video>
                      <p>Wait until the configuration screen is displayed and press the next icon.</p>
                    </div>
                    <div id="menu1" class="tab-pane">
                      <p><h3>Enter device key</h3></p>
                      <p>The key is located on the bottom of the device.</p>
                      <video src="/static/images/anim2.mp4" muted loop autoplay></video>
                      <input class="form-control" type="text" id="dk" placeholder="Enter device key">&nbsp;
                      <button type="button" id="device_ok">Confirm key</button>
                    </div>
                    <div id="menu2" class="tab-pane">
                      <p><h3>Enter the pin code</h3></p>
                      <p>The pin is displayed on the screen of the device.<br> Rewrite it and move on.</p>
                      <video src="/static/images/settings_pin_anim.mp4" muted loop autoplay></video><br>
                      <input class="form-control" type="text" id="pin" placeholder="Enter pincode">&nbsp;
                      <button type="button" id="pin_ok">Next</button>
                    </div>
                    <div id="menu3" class="tab-pane">
                      <p><h3>Success</h3></p>
                      <video src="/static/images/sacc.mp4" muted autoplay></video><br>
                      <p>Device is connected.<br> Information about your device.<br> <b>Serial number:</b> {{ device.serial_number }} <br><b>Version:</b> {{ device.version }}<br><b>Address:</b> {{ device.device_key }}</p>
                      <br>
                      <button type="button" id="delete_device_button" data-bs-toggle="modal" data-bs-target="#deldeviceModal">Delete device</button>
                      <div class="modal fade" id="deldeviceModal" tabindex="-1" aria-labelledby="deldeviceModalLabel" aria-hidden="true">
                        <div class="modal-dialog">
                          <div class="modal-content">
                            <div class="modal-header">
                              <h5 class="modal-title" id="deldeviceModalLabel">Confirm delete device</h5>
                              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                            </div>
                            <div class="modal-body">
                              Are you sure you want to delete this device.<br>
                              If you are sure, confirm by clicking on the bottom.
                            </div>
                            <div class="modal-footer">
                              <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Leave</button>
                              <button type="button" id="delete_device" class="btn btn-danger">Confirm delete device</button>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="tab-pane fade" id="v-pills-profile" role="tabpanel" aria-labelledby="v-pills-profile-tab">
              <div class="passwordchange">
              <div class="card-body pb-2">
                <h3>Password change</h3><br>
                <div class="form-group">
                  <label class="form-label">Current password</label>
                  <input type="password" class="form-control">
                </div>

                <div class="form-group">
                  <label class="form-label">New password</label>
                  <input type="password" class="form-control">
                </div>

                <div class="form-group">
                  <label class="form-label">Repeat new password</label>
                  <input type="password" class="form-control">
                </div>
                <br>
                <button type="button" class="btn btn-primary" name="settings" value="change_password">Save changes</button>
              </div>
            </div>
            </div>
            <div class="tab-pane fade" id="v-pills-messages" role="tabpanel" aria-labelledby="v-pills-messages-tab">
              <div class="card-body deletecon">
                <h2>Delete your account</h2>
                <p>Delete your account permanently on pulsebook.</p><br>
                <button type="button" class="btn btn-danger" data-bs-toggle="modal" data-bs-target="#accountModal">Delete account</button>
                <div class="modal fade" id="accountModal" tabindex="-1" aria-labelledby="accountModalLabel" aria-hidden="true">
                  <div class="modal-dialog">
                    <div class="modal-content">
                      <div class="modal-header">
                        <h5 class="modal-title" id="exampleModalLabel">Confirm account deletion</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                      </div>
                      <div class="modal-body">
                        Are you sure you want to delete your whole account? 
                        You'll lose everything.
                        If you are sure, confirm by clicking on the bottom.
                      </div>
                      <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Leave</button>
                        <button type="submit" class="btn btn-danger" name="settings" value="delete_account">Confirm delete account</button>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
        </div>
      </div>
    </div>
  </form>
</div>
</div>
<script type="text/javascript"> 
  window.config_state = "{{device.config_state}}"
</script>
{% endblock %}

{% block scripts %}
<script type="text/javascript" src="/static/scripts/settingspage.js"></script>
{% endblock %}